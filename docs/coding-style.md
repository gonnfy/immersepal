# コーディングスタイルガイド

## 1. 目的

コードの一貫性、可読性、保守性を高めるためのスタイルガイドです。

## 2. 自動化ツール

プロジェクトのコード品質と一貫性を保つために、以下の自動化ツールを利用します。

- **フォーマッター:** **Prettier**

  - **目的:** コードの見た目に関するスタイル（インデント、スペース、改行など）を自動で統一します。
  - **設定:** プロジェクトルートの Prettier 設定ファイル (`prettier.config.js`, `.prettierrc.json` など) に従います。
  - **運用:** エディタの保存時自動整形 (Format on Save) の利用を強く推奨します。CI (GitHub Actions) でもフォーマットが正しいかのチェック (`bun run format:check` 等) を行うことが望ましいです。

- **リンター:** **ESLint**
  - **目的:** コードの潜在的なバグ、アンチパターン、およびスタイルガイドライン違反（フォーマッターが扱わない範囲）を静的に解析・検出します。
  - **設定:** プロジェクトルートにある **`[ESLint設定ファイル名]`** (例: `.eslintrc.json`, `eslint.config.js` など。**実際のファイル名に置き換えてください**) が、適用される ESLint ルールの**唯一の正 (Source of Truth)** となります。この設定ファイルには、TypeScript, React, React Hooks, Next.js 用のプラグインやルールが適切に設定されています（または設定されるべきです）。
  - **実行:** コードの静的解析とルールチェックは、以下のコマンドで実行します。
    ```bash
    bun run lint
    ```
    _(package.json の `scripts` 内で定義されているコマンド)_
  - **必須事項:**
    - エディタ (VS Code など) に ESLint 拡張機能を導入し、**リアルタイムでのエラー/警告表示と、可能な範囲での自動修正 (Auto Fix on Save) を有効にすること**を強く推奨します。
    - CI (GitHub Actions) でもこの `lint` コマンドが自動実行され、**エラーなくチェックをパスすることが必須**となります。すべてのコードは、上記の設定ファイルに定義された ESLint ルールに準拠する必要があります。

## 3. TypeScript

- `tsconfig.json` で `strict: true` を有効にします。
- `any` 型の使用は原則禁止します。具体的な型、`unknown`、ジェネリクスを適切に使用します。
- 型エイリアス (`type`) とインターフェース (`interface`) は、プロジェクト内で一貫した方針で使用します。（例: オブジェクトや関数の型には `type` を優先的に使用する）。
- ユーティリティ型 (`Partial`, `Readonly` など) を適切に活用します。

## 4. 命名規則

- **変数、関数:** `camelCase`
- **クラス、コンポーネント、型エイリアス、インターフェース:** `PascalCase`
- **定数:** `UPPER_SNAKE_CASE`
- **ファイル名:**
  - 一般的な `.ts` ファイル: `kebab-case.ts` (推奨)
  - React コンポーネントファイル (`.tsx`): `PascalCase.tsx`
  - テストファイル: `*.test.ts` または `*.spec.ts`

## 5. React / Next.js

- 関数コンポーネントと Hooks を使用します。
- React Hooks のルールを遵守します。
- Next.js App Router の規約（ディレクトリ構造、ファイル命名など）に従います。
- コンポーネントは小さく、単一責任の原則 (SRP) を意識します。

## 6. コメント

- コードを読めばわかる「何をしているか」ではなく、**「なぜ」** そのような実装にしたのか、という意図や背景、複雑なロジックの要点を説明するために書きます。
- `lib` や `services` 内の複雑な関数や公開するモジュールには JSDoc 形式でのコメントを推奨します。
- コミット前に不要なコメントアウトされたコードは削除します。

## 7. インポート (`import`)

- ESLint のプラグイン (`eslint-plugin-import` など) や Prettier を利用して、インポート順序を自動で整理します (例: 外部ライブラリ → 内部絶対パス (`@/`) → 相対パス)。
- `tsconfig.json` の `paths` を設定し、深い階層からの相対パス (`../../...`) を避けるために絶対パス (`@/components/...`) を可能な限り使用します。

## 8. エラーハンドリング

`docs/error-handling.md` で定義された戦略に従います。

## 9. シンプルさ

複雑すぎる実装や時期尚早な最適化よりも、明確でシンプルなコードを優先します。
